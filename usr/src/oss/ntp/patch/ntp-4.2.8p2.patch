diff -cNr ../ntp-4.2.8p2-orig/config.guess ./config.guess
*** ../ntp-4.2.8p2-orig/config.guess	2011-07-11 11:22:26.000000000 +0900
--- ./config.guess	2015-06-22 02:08:40.895763171 +0900
***************
*** 1,14 ****
  #! /bin/sh
  # Attempt to guess a canonical system name.
! #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
! #   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
! #   2011 Free Software Foundation, Inc.
  
! timestamp='2011-06-03'
  
  # This file is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License as published by
! # the Free Software Foundation; either version 2 of the License, or
  # (at your option) any later version.
  #
  # This program is distributed in the hope that it will be useful, but
--- 1,12 ----
  #! /bin/sh
  # Attempt to guess a canonical system name.
! #   Copyright 1992-2014 Free Software Foundation, Inc.
  
! timestamp='2014-03-23'
  
  # This file is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License as published by
! # the Free Software Foundation; either version 3 of the License, or
  # (at your option) any later version.
  #
  # This program is distributed in the hope that it will be useful, but
***************
*** 17,42 ****
  # General Public License for more details.
  #
  # You should have received a copy of the GNU General Public License
! # along with this program; if not, write to the Free Software
! # Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
! # 02110-1301, USA.
  #
  # As a special exception to the GNU General Public License, if you
  # distribute this file as part of a program that contains a
  # configuration script generated by Autoconf, you may include it under
! # the same distribution terms that you use for the rest of that program.
! 
! 
! # Originally written by Per Bothner.  Please send patches (context
! # diff format) to <config-patches@gnu.org> and include a ChangeLog
! # entry.
  #
! # This script attempts to guess a canonical system name similar to
! # config.sub.  If it succeeds, it prints the system name on stdout, and
! # exits with 0.  Otherwise, it exits with 1.
  #
  # You can get the latest version of this script from:
  # http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
  
  me=`echo "$0" | sed -e 's,.*/,,'`
  
--- 15,36 ----
  # General Public License for more details.
  #
  # You should have received a copy of the GNU General Public License
! # along with this program; if not, see <http://www.gnu.org/licenses/>.
  #
  # As a special exception to the GNU General Public License, if you
  # distribute this file as part of a program that contains a
  # configuration script generated by Autoconf, you may include it under
! # the same distribution terms that you use for the rest of that
! # program.  This Exception is an additional permission under section 7
! # of the GNU General Public License, version 3 ("GPLv3").
  #
! # Originally written by Per Bothner.
  #
  # You can get the latest version of this script from:
  # http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
+ #
+ # Please send patches with a ChangeLog entry to config-patches@gnu.org.
+ 
  
  me=`echo "$0" | sed -e 's,.*/,,'`
  
***************
*** 56,64 ****
  GNU config.guess ($timestamp)
  
  Originally written by Per Bothner.
! Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
! 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011 Free
! Software Foundation, Inc.
  
  This is free software; see the source for copying conditions.  There is NO
  warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
--- 50,56 ----
  GNU config.guess ($timestamp)
  
  Originally written by Per Bothner.
! Copyright 1992-2014 Free Software Foundation, Inc.
  
  This is free software; see the source for copying conditions.  There is NO
  warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
***************
*** 140,151 ****
  UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
  UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
  
  # Note: order is significant - the case branches are not exclusive.
  
  case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
      *:NetBSD:*:*)
  	# NetBSD (nbsd) targets should (where applicable) match one or
! 	# more of the tupples: *-*-netbsdelf*, *-*-netbsdaout*,
  	# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently
  	# switched to ELF, *-*-netbsd* would select the old
  	# object file format.  This provides both forward
--- 132,164 ----
  UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
  UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
  
+ case "${UNAME_SYSTEM}" in
+ Linux|GNU|GNU/*)
+ 	# If the system lacks a compiler, then just pick glibc.
+ 	# We could probably try harder.
+ 	LIBC=gnu
+ 
+ 	eval $set_cc_for_build
+ 	cat <<-EOF > $dummy.c
+ 	#include <features.h>
+ 	#if defined(__UCLIBC__)
+ 	LIBC=uclibc
+ 	#elif defined(__dietlibc__)
+ 	LIBC=dietlibc
+ 	#else
+ 	LIBC=gnu
+ 	#endif
+ 	EOF
+ 	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC' | sed 's, ,,g'`
+ 	;;
+ esac
+ 
  # Note: order is significant - the case branches are not exclusive.
  
  case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
      *:NetBSD:*:*)
  	# NetBSD (nbsd) targets should (where applicable) match one or
! 	# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,
  	# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently
  	# switched to ELF, *-*-netbsd* would select the old
  	# object file format.  This provides both forward
***************
*** 202,207 ****
--- 215,224 ----
  	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
  	echo "${machine}-${os}${release}"
  	exit ;;
+     *:Bitrig:*:*)
+ 	UNAME_MACHINE_ARCH=`arch | sed 's/Bitrig.//'`
+ 	echo ${UNAME_MACHINE_ARCH}-unknown-bitrig${UNAME_RELEASE}
+ 	exit ;;
      *:OpenBSD:*:*)
  	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
  	echo ${UNAME_MACHINE_ARCH}-unknown-openbsd${UNAME_RELEASE}
***************
*** 304,310 ****
      arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
  	echo arm-acorn-riscix${UNAME_RELEASE}
  	exit ;;
!     arm:riscos:*:*|arm:RISCOS:*:*)
  	echo arm-unknown-riscos
  	exit ;;
      SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
--- 321,327 ----
      arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
  	echo arm-acorn-riscix${UNAME_RELEASE}
  	exit ;;
!     arm*:riscos:*:*|arm*:RISCOS:*:*)
  	echo arm-unknown-riscos
  	exit ;;
      SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
***************
*** 792,812 ****
  	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
  	exit ;;
      *:FreeBSD:*:*)
! 	case ${UNAME_MACHINE} in
! 	    pc98)
! 		echo i386-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
  	    amd64)
  		echo x86_64-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
  	    *)
! 		echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
  	esac
  	exit ;;
      i*:CYGWIN*:*)
  	echo ${UNAME_MACHINE}-pc-cygwin
  	exit ;;
      *:MINGW*:*)
  	echo ${UNAME_MACHINE}-pc-mingw32
  	exit ;;
      i*:windows32*:*)
  	# uname -m includes "-pc" on this system.
  	echo ${UNAME_MACHINE}-mingw32
--- 809,834 ----
  	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
  	exit ;;
      *:FreeBSD:*:*)
! 	UNAME_PROCESSOR=`/usr/bin/uname -p`
! 	case ${UNAME_PROCESSOR} in
  	    amd64)
  		echo x86_64-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
  	    *)
! 		echo ${UNAME_PROCESSOR}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
  	esac
  	exit ;;
      i*:CYGWIN*:*)
  	echo ${UNAME_MACHINE}-pc-cygwin
  	exit ;;
+     *:MINGW64*:*)
+ 	echo ${UNAME_MACHINE}-pc-mingw64
+ 	exit ;;
      *:MINGW*:*)
  	echo ${UNAME_MACHINE}-pc-mingw32
  	exit ;;
+     *:MSYS*:*)
+ 	echo ${UNAME_MACHINE}-pc-msys
+ 	exit ;;
      i*:windows32*:*)
  	# uname -m includes "-pc" on this system.
  	echo ${UNAME_MACHINE}-mingw32
***************
*** 852,866 ****
  	exit ;;
      *:GNU:*:*)
  	# the GNU system
! 	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
  	exit ;;
      *:GNU/*:*:*)
  	# other systems with GNU libc and userland
! 	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-gnu
  	exit ;;
      i*86:Minix:*:*)
  	echo ${UNAME_MACHINE}-pc-minix
  	exit ;;
      alpha:Linux:*:*)
  	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
  	  EV5)   UNAME_MACHINE=alphaev5 ;;
--- 874,895 ----
  	exit ;;
      *:GNU:*:*)
  	# the GNU system
! 	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-${LIBC}`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
  	exit ;;
      *:GNU/*:*:*)
  	# other systems with GNU libc and userland
! 	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-${LIBC}
  	exit ;;
      i*86:Minix:*:*)
  	echo ${UNAME_MACHINE}-pc-minix
  	exit ;;
+     aarch64:Linux:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+ 	exit ;;
+     aarch64_be:Linux:*:*)
+ 	UNAME_MACHINE=aarch64_be
+ 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+ 	exit ;;
      alpha:Linux:*:*)
  	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
  	  EV5)   UNAME_MACHINE=alphaev5 ;;
***************
*** 872,927 ****
  	  EV68*) UNAME_MACHINE=alphaev68 ;;
  	esac
  	objdump --private-headers /bin/sh | grep -q ld.so.1
! 	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
  	exit ;;
      arm*:Linux:*:*)
  	eval $set_cc_for_build
  	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
  	    | grep -q __ARM_EABI__
  	then
! 	    echo ${UNAME_MACHINE}-unknown-linux-gnu
  	else
  	    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
  		| grep -q __ARM_PCS_VFP
  	    then
! 		echo ${UNAME_MACHINE}-unknown-linux-gnueabi
  	    else
! 		echo ${UNAME_MACHINE}-unknown-linux-gnueabihf
  	    fi
  	fi
  	exit ;;
      avr32*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      cris:Linux:*:*)
! 	echo cris-axis-linux-gnu
  	exit ;;
      crisv32:Linux:*:*)
! 	echo crisv32-axis-linux-gnu
  	exit ;;
      frv:Linux:*:*)
! 	echo frv-unknown-linux-gnu
  	exit ;;
      i*86:Linux:*:*)
! 	LIBC=gnu
! 	eval $set_cc_for_build
! 	sed 's/^	//' << EOF >$dummy.c
! 	#ifdef __dietlibc__
! 	LIBC=dietlibc
! 	#endif
! EOF
! 	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC'`
! 	echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
  	exit ;;
      ia64:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      m32r*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      m68*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      mips:Linux:*:* | mips64:Linux:*:*)
  	eval $set_cc_for_build
--- 901,954 ----
  	  EV68*) UNAME_MACHINE=alphaev68 ;;
  	esac
  	objdump --private-headers /bin/sh | grep -q ld.so.1
! 	if test "$?" = 0 ; then LIBC="gnulibc1" ; fi
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
! 	exit ;;
!     arc:Linux:*:* | arceb:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      arm*:Linux:*:*)
  	eval $set_cc_for_build
  	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
  	    | grep -q __ARM_EABI__
  	then
! 	    echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	else
  	    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
  		| grep -q __ARM_PCS_VFP
  	    then
! 		echo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabi
  	    else
! 		echo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabihf
  	    fi
  	fi
  	exit ;;
      avr32*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      cris:Linux:*:*)
! 	echo ${UNAME_MACHINE}-axis-linux-${LIBC}
  	exit ;;
      crisv32:Linux:*:*)
! 	echo ${UNAME_MACHINE}-axis-linux-${LIBC}
  	exit ;;
      frv:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
! 	exit ;;
!     hexagon:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      i*86:Linux:*:*)
! 	echo ${UNAME_MACHINE}-pc-linux-${LIBC}
  	exit ;;
      ia64:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      m32r*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      m68*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      mips:Linux:*:* | mips64:Linux:*:*)
  	eval $set_cc_for_build
***************
*** 940,993 ****
  	#endif
  EOF
  	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`
! 	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
  	;;
!     or32:Linux:*:*)
! 	echo or32-unknown-linux-gnu
  	exit ;;
      padre:Linux:*:*)
! 	echo sparc-unknown-linux-gnu
  	exit ;;
      parisc64:Linux:*:* | hppa64:Linux:*:*)
! 	echo hppa64-unknown-linux-gnu
  	exit ;;
      parisc:Linux:*:* | hppa:Linux:*:*)
  	# Look for CPU level
  	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
! 	  PA7*) echo hppa1.1-unknown-linux-gnu ;;
! 	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
! 	  *)    echo hppa-unknown-linux-gnu ;;
  	esac
  	exit ;;
      ppc64:Linux:*:*)
! 	echo powerpc64-unknown-linux-gnu
  	exit ;;
      ppc:Linux:*:*)
! 	echo powerpc-unknown-linux-gnu
  	exit ;;
      s390:Linux:*:* | s390x:Linux:*:*)
! 	echo ${UNAME_MACHINE}-ibm-linux
  	exit ;;
      sh64*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      sh*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      sparc:Linux:*:* | sparc64:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      tile*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      vax:Linux:*:*)
! 	echo ${UNAME_MACHINE}-dec-linux-gnu
  	exit ;;
      x86_64:Linux:*:*)
! 	echo x86_64-unknown-linux-gnu
  	exit ;;
      xtensa*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      i*86:DYNIX/ptx:4*:*)
  	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
--- 967,1029 ----
  	#endif
  EOF
  	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`
! 	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-${LIBC}"; exit; }
  	;;
!     openrisc*:Linux:*:*)
! 	echo or1k-unknown-linux-${LIBC}
! 	exit ;;
!     or32:Linux:*:* | or1k*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      padre:Linux:*:*)
! 	echo sparc-unknown-linux-${LIBC}
  	exit ;;
      parisc64:Linux:*:* | hppa64:Linux:*:*)
! 	echo hppa64-unknown-linux-${LIBC}
  	exit ;;
      parisc:Linux:*:* | hppa:Linux:*:*)
  	# Look for CPU level
  	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
! 	  PA7*) echo hppa1.1-unknown-linux-${LIBC} ;;
! 	  PA8*) echo hppa2.0-unknown-linux-${LIBC} ;;
! 	  *)    echo hppa-unknown-linux-${LIBC} ;;
  	esac
  	exit ;;
      ppc64:Linux:*:*)
! 	echo powerpc64-unknown-linux-${LIBC}
  	exit ;;
      ppc:Linux:*:*)
! 	echo powerpc-unknown-linux-${LIBC}
! 	exit ;;
!     ppc64le:Linux:*:*)
! 	echo powerpc64le-unknown-linux-${LIBC}
! 	exit ;;
!     ppcle:Linux:*:*)
! 	echo powerpcle-unknown-linux-${LIBC}
  	exit ;;
      s390:Linux:*:* | s390x:Linux:*:*)
! 	echo ${UNAME_MACHINE}-ibm-linux-${LIBC}
  	exit ;;
      sh64*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      sh*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      sparc:Linux:*:* | sparc64:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      tile*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      vax:Linux:*:*)
! 	echo ${UNAME_MACHINE}-dec-linux-${LIBC}
  	exit ;;
      x86_64:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      xtensa*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      i*86:DYNIX/ptx:4*:*)
  	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
***************
*** 1191,1196 ****
--- 1227,1235 ----
      BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.
  	echo i586-pc-haiku
  	exit ;;
+     x86_64:Haiku:*:*)
+ 	echo x86_64-unknown-haiku
+ 	exit ;;
      SX-4:SUPER-UX:*:*)
  	echo sx4-nec-superux${UNAME_RELEASE}
  	exit ;;
***************
*** 1217,1235 ****
  	exit ;;
      *:Darwin:*:*)
  	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
! 	case $UNAME_PROCESSOR in
! 	    i386)
! 		eval $set_cc_for_build
! 		if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
! 		  if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
! 		      (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
! 		      grep IS_64BIT_ARCH >/dev/null
! 		  then
! 		      UNAME_PROCESSOR="x86_64"
! 		  fi
! 		fi ;;
! 	    unknown) UNAME_PROCESSOR=powerpc ;;
! 	esac
  	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
  	exit ;;
      *:procnto*:*:* | *:QNX:[0123456789]*:*)
--- 1256,1286 ----
  	exit ;;
      *:Darwin:*:*)
  	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
! 	eval $set_cc_for_build
! 	if test "$UNAME_PROCESSOR" = unknown ; then
! 	    UNAME_PROCESSOR=powerpc
! 	fi
! 	if test `echo "$UNAME_RELEASE" | sed -e 's/\..*//'` -le 10 ; then
! 	    if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
! 		if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
! 		    (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
! 		    grep IS_64BIT_ARCH >/dev/null
! 		then
! 		    case $UNAME_PROCESSOR in
! 			i386) UNAME_PROCESSOR=x86_64 ;;
! 			powerpc) UNAME_PROCESSOR=powerpc64 ;;
! 		    esac
! 		fi
! 	    fi
! 	elif test "$UNAME_PROCESSOR" = i386 ; then
! 	    # Avoid executing cc on OS X 10.9, as it ships with a stub
! 	    # that puts up a graphical alert prompting to install
! 	    # developer tools.  Any system running Mac OS X 10.7 or
! 	    # later (Darwin 11 and later) is required to have a 64-bit
! 	    # processor. This is not true of the ARM version of Darwin
! 	    # that Apple uses in portable devices.
! 	    UNAME_PROCESSOR=x86_64
! 	fi
  	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
  	exit ;;
      *:procnto*:*:* | *:QNX:[0123456789]*:*)
***************
*** 1246,1252 ****
      NEO-?:NONSTOP_KERNEL:*:*)
  	echo neo-tandem-nsk${UNAME_RELEASE}
  	exit ;;
!     NSE-?:NONSTOP_KERNEL:*:*)
  	echo nse-tandem-nsk${UNAME_RELEASE}
  	exit ;;
      NSR-?:NONSTOP_KERNEL:*:*)
--- 1297,1303 ----
      NEO-?:NONSTOP_KERNEL:*:*)
  	echo neo-tandem-nsk${UNAME_RELEASE}
  	exit ;;
!     NSE-*:NONSTOP_KERNEL:*:*)
  	echo nse-tandem-nsk${UNAME_RELEASE}
  	exit ;;
      NSR-?:NONSTOP_KERNEL:*:*)
***************
*** 1315,1472 ****
      i*86:AROS:*:*)
  	echo ${UNAME_MACHINE}-pc-aros
  	exit ;;
! esac
! 
! #echo '(No uname command or uname output not recognized.)' 1>&2
! #echo "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" 1>&2
! 
! eval $set_cc_for_build
! cat >$dummy.c <<EOF
! #ifdef _SEQUENT_
! # include <sys/types.h>
! # include <sys/utsname.h>
! #endif
! main ()
! {
! #if defined (sony)
! #if defined (MIPSEB)
!   /* BFD wants "bsd" instead of "newsos".  Perhaps BFD should be changed,
!      I don't know....  */
!   printf ("mips-sony-bsd\n"); exit (0);
! #else
! #include <sys/param.h>
!   printf ("m68k-sony-newsos%s\n",
! #ifdef NEWSOS4
! 	"4"
! #else
! 	""
! #endif
! 	); exit (0);
! #endif
! #endif
! 
! #if defined (__arm) && defined (__acorn) && defined (__unix)
!   printf ("arm-acorn-riscix\n"); exit (0);
! #endif
! 
! #if defined (hp300) && !defined (hpux)
!   printf ("m68k-hp-bsd\n"); exit (0);
! #endif
! 
! #if defined (NeXT)
! #if !defined (__ARCHITECTURE__)
! #define __ARCHITECTURE__ "m68k"
! #endif
!   int version;
!   version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null`;
!   if (version < 4)
!     printf ("%s-next-nextstep%d\n", __ARCHITECTURE__, version);
!   else
!     printf ("%s-next-openstep%d\n", __ARCHITECTURE__, version);
!   exit (0);
! #endif
! 
! #if defined (MULTIMAX) || defined (n16)
! #if defined (UMAXV)
!   printf ("ns32k-encore-sysv\n"); exit (0);
! #else
! #if defined (CMU)
!   printf ("ns32k-encore-mach\n"); exit (0);
! #else
!   printf ("ns32k-encore-bsd\n"); exit (0);
! #endif
! #endif
! #endif
! 
! #if defined (__386BSD__)
!   printf ("i386-pc-bsd\n"); exit (0);
! #endif
! 
! #if defined (sequent)
! #if defined (i386)
!   printf ("i386-sequent-dynix\n"); exit (0);
! #endif
! #if defined (ns32000)
!   printf ("ns32k-sequent-dynix\n"); exit (0);
! #endif
! #endif
! 
! #if defined (_SEQUENT_)
!     struct utsname un;
! 
!     uname(&un);
! 
!     if (strncmp(un.version, "V2", 2) == 0) {
! 	printf ("i386-sequent-ptx2\n"); exit (0);
!     }
!     if (strncmp(un.version, "V1", 2) == 0) { /* XXX is V1 correct? */
! 	printf ("i386-sequent-ptx1\n"); exit (0);
!     }
!     printf ("i386-sequent-ptx\n"); exit (0);
! 
! #endif
! 
! #if defined (vax)
! # if !defined (ultrix)
! #  include <sys/param.h>
! #  if defined (BSD)
! #   if BSD == 43
!       printf ("vax-dec-bsd4.3\n"); exit (0);
! #   else
! #    if BSD == 199006
!       printf ("vax-dec-bsd4.3reno\n"); exit (0);
! #    else
!       printf ("vax-dec-bsd\n"); exit (0);
! #    endif
! #   endif
! #  else
!     printf ("vax-dec-bsd\n"); exit (0);
! #  endif
! # else
!     printf ("vax-dec-ultrix\n"); exit (0);
! # endif
! #endif
! 
! #if defined (alliant) && defined (i860)
!   printf ("i860-alliant-bsd\n"); exit (0);
! #endif
! 
!   exit (1);
! }
! EOF
! 
! $CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && SYSTEM_NAME=`$dummy` &&
! 	{ echo "$SYSTEM_NAME"; exit; }
! 
! # Apollos put the system type in the environment.
! 
! test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit; }
! 
! # Convex versions that predate uname can use getsysinfo(1)
! 
! if [ -x /usr/convex/getsysinfo ]
! then
!     case `getsysinfo -f cpu_type` in
!     c1*)
! 	echo c1-convex-bsd
  	exit ;;
!     c2*)
! 	if getsysinfo -f scalar_acc
! 	then echo c32-convex-bsd
! 	else echo c2-convex-bsd
! 	fi
! 	exit ;;
!     c34*)
! 	echo c34-convex-bsd
! 	exit ;;
!     c38*)
! 	echo c38-convex-bsd
! 	exit ;;
!     c4*)
! 	echo c4-convex-bsd
! 	exit ;;
!     esac
! fi
  
  cat >&2 <<EOF
  $0: unable to guess system type
--- 1366,1375 ----
      i*86:AROS:*:*)
  	echo ${UNAME_MACHINE}-pc-aros
  	exit ;;
!     x86_64:VMkernel:*:*)
! 	echo ${UNAME_MACHINE}-unknown-esx
  	exit ;;
! esac
  
  cat >&2 <<EOF
  $0: unable to guess system type
diff -cNr ../ntp-4.2.8p2-orig/config.sub ./config.sub
*** ../ntp-4.2.8p2-orig/config.sub	2011-07-11 11:22:26.000000000 +0900
--- ./config.sub	2015-06-22 02:08:40.896763213 +0900
***************
*** 1,38 ****
  #! /bin/sh
  # Configuration validation subroutine script.
! #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
! #   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
! #   2011 Free Software Foundation, Inc.
! 
! timestamp='2011-06-03'
! 
! # This file is (in principle) common to ALL GNU software.
! # The presence of a machine in this file suggests that SOME GNU software
! # can handle that machine.  It does not imply ALL GNU software can.
! #
! # This file is free software; you can redistribute it and/or modify
! # it under the terms of the GNU General Public License as published by
! # the Free Software Foundation; either version 2 of the License, or
  # (at your option) any later version.
  #
! # This program is distributed in the hope that it will be useful,
! # but WITHOUT ANY WARRANTY; without even the implied warranty of
! # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
! # GNU General Public License for more details.
  #
  # You should have received a copy of the GNU General Public License
! # along with this program; if not, write to the Free Software
! # Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
! # 02110-1301, USA.
  #
  # As a special exception to the GNU General Public License, if you
  # distribute this file as part of a program that contains a
  # configuration script generated by Autoconf, you may include it under
! # the same distribution terms that you use for the rest of that program.
  
  
! # Please send patches to <config-patches@gnu.org>.  Submit a context
! # diff and a properly formatted GNU ChangeLog entry.
  #
  # Configuration subroutine to validate and canonicalize a configuration type.
  # Supply the specified configuration type as an argument.
--- 1,31 ----
  #! /bin/sh
  # Configuration validation subroutine script.
! #   Copyright 1992-2014 Free Software Foundation, Inc.
! 
! timestamp='2014-07-28'
! 
! # This file is free software; you can redistribute it and/or modify it
! # under the terms of the GNU General Public License as published by
! # the Free Software Foundation; either version 3 of the License, or
  # (at your option) any later version.
  #
! # This program is distributed in the hope that it will be useful, but
! # WITHOUT ANY WARRANTY; without even the implied warranty of
! # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
! # General Public License for more details.
  #
  # You should have received a copy of the GNU General Public License
! # along with this program; if not, see <http://www.gnu.org/licenses/>.
  #
  # As a special exception to the GNU General Public License, if you
  # distribute this file as part of a program that contains a
  # configuration script generated by Autoconf, you may include it under
! # the same distribution terms that you use for the rest of that
! # program.  This Exception is an additional permission under section 7
! # of the GNU General Public License, version 3 ("GPLv3").
  
  
! # Please send patches with a ChangeLog entry to config-patches@gnu.org.
  #
  # Configuration subroutine to validate and canonicalize a configuration type.
  # Supply the specified configuration type as an argument.
***************
*** 75,83 ****
  version="\
  GNU config.sub ($timestamp)
  
! Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
! 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011 Free
! Software Foundation, Inc.
  
  This is free software; see the source for copying conditions.  There is NO
  warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
--- 68,74 ----
  version="\
  GNU config.sub ($timestamp)
  
! Copyright 1992-2014 Free Software Foundation, Inc.
  
  This is free software; see the source for copying conditions.  There is NO
  warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
***************
*** 125,137 ****
  maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
  case $maybe_os in
    nto-qnx* | linux-gnu* | linux-android* | linux-dietlibc | linux-newlib* | \
!   linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | \
    knetbsd*-gnu* | netbsd*-gnu* | \
    kopensolaris*-gnu* | \
    storm-chaos* | os2-emx* | rtmk-nova*)
      os=-$maybe_os
      basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
      ;;
    *)
      basic_machine=`echo $1 | sed 's/-[^-]*$//'`
      if [ $basic_machine != $1 ]
--- 116,132 ----
  maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
  case $maybe_os in
    nto-qnx* | linux-gnu* | linux-android* | linux-dietlibc | linux-newlib* | \
!   linux-musl* | linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | \
    knetbsd*-gnu* | netbsd*-gnu* | \
    kopensolaris*-gnu* | \
    storm-chaos* | os2-emx* | rtmk-nova*)
      os=-$maybe_os
      basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
      ;;
+   android-linux)
+     os=-linux-android
+     basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`-unknown
+     ;;
    *)
      basic_machine=`echo $1 | sed 's/-[^-]*$//'`
      if [ $basic_machine != $1 ]
***************
*** 154,160 ****
  	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
  	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
  	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
! 	-apple | -axis | -knuth | -cray | -microblaze)
  		os=
  		basic_machine=$1
  		;;
--- 149,155 ----
  	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
  	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
  	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
! 	-apple | -axis | -knuth | -cray | -microblaze*)
  		os=
  		basic_machine=$1
  		;;
***************
*** 223,228 ****
--- 218,229 ----
  	-isc*)
  		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
  		;;
+ 	-lynx*178)
+ 		os=-lynxos178
+ 		;;
+ 	-lynx*5)
+ 		os=-lynxos5
+ 		;;
  	-lynx*)
  		os=-lynxos
  		;;
***************
*** 247,266 ****
  	# Some are omitted here because they have special meanings below.
  	1750a | 580 \
  	| a29k \
  	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
  	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
  	| am33_2.0 \
! 	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr | avr32 \
  	| bfin \
! 	| c4x | clipper \
  	| d10v | d30v | dlx | dsp16xx \
  	| fido | fr30 | frv \
  	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
  	| i370 | i860 | i960 | ia64 \
  	| ip2k | iq2000 \
  	| lm32 \
  	| m32c | m32r | m32rle | m68000 | m68k | m88k \
! 	| maxq | mb | microblaze | mcore | mep | metag \
  	| mips | mipsbe | mipseb | mipsel | mipsle \
  	| mips16 \
  	| mips64 | mips64el \
--- 248,275 ----
  	# Some are omitted here because they have special meanings below.
  	1750a | 580 \
  	| a29k \
+ 	| aarch64 | aarch64_be \
  	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
  	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
  	| am33_2.0 \
! 	| arc | arceb \
! 	| arm | arm[bl]e | arme[lb] | armv[2-8] | armv[3-8][lb] | armv7[arm] \
! 	| avr | avr32 \
! 	| be32 | be64 \
  	| bfin \
! 	| c4x | c8051 | clipper \
  	| d10v | d30v | dlx | dsp16xx \
+ 	| epiphany \
  	| fido | fr30 | frv \
  	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
+ 	| hexagon \
  	| i370 | i860 | i960 | ia64 \
  	| ip2k | iq2000 \
+ 	| k1om \
+ 	| le32 | le64 \
  	| lm32 \
  	| m32c | m32r | m32rle | m68000 | m68k | m88k \
! 	| maxq | mb | microblaze | microblazeel | mcore | mep | metag \
  	| mips | mipsbe | mipseb | mipsel | mipsle \
  	| mips16 \
  	| mips64 | mips64el \
***************
*** 274,297 ****
  	| mips64vr5900 | mips64vr5900el \
  	| mipsisa32 | mipsisa32el \
  	| mipsisa32r2 | mipsisa32r2el \
  	| mipsisa64 | mipsisa64el \
  	| mipsisa64r2 | mipsisa64r2el \
  	| mipsisa64sb1 | mipsisa64sb1el \
  	| mipsisa64sr71k | mipsisa64sr71kel \
  	| mipstx39 | mipstx39el \
  	| mn10200 | mn10300 \
  	| moxie \
  	| mt \
  	| msp430 \
  	| nds32 | nds32le | nds32be \
! 	| nios | nios2 \
  	| ns16k | ns32k \
! 	| open8 \
! 	| or32 \
  	| pdp10 | pdp11 | pj | pjl \
  	| powerpc | powerpc64 | powerpc64le | powerpcle \
  	| pyramid \
! 	| rx \
  	| score \
  	| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[34]eb | sheb | shbe | shle | sh[1234]le | sh3ele \
  	| sh64 | sh64le \
--- 283,308 ----
  	| mips64vr5900 | mips64vr5900el \
  	| mipsisa32 | mipsisa32el \
  	| mipsisa32r2 | mipsisa32r2el \
+ 	| mipsisa32r6 | mipsisa32r6el \
  	| mipsisa64 | mipsisa64el \
  	| mipsisa64r2 | mipsisa64r2el \
+ 	| mipsisa64r6 | mipsisa64r6el \
  	| mipsisa64sb1 | mipsisa64sb1el \
  	| mipsisa64sr71k | mipsisa64sr71kel \
+ 	| mipsr5900 | mipsr5900el \
  	| mipstx39 | mipstx39el \
  	| mn10200 | mn10300 \
  	| moxie \
  	| mt \
  	| msp430 \
  	| nds32 | nds32le | nds32be \
! 	| nios | nios2 | nios2eb | nios2el \
  	| ns16k | ns32k \
! 	| open8 | or1k | or1knd | or32 \
  	| pdp10 | pdp11 | pj | pjl \
  	| powerpc | powerpc64 | powerpc64le | powerpcle \
  	| pyramid \
! 	| rl78 | rx \
  	| score \
  	| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[34]eb | sheb | shbe | shle | sh[1234]le | sh3ele \
  	| sh64 | sh64le \
***************
*** 315,322 ****
  	c6x)
  		basic_machine=tic6x-unknown
  		;;
! 	m6811 | m68hc11 | m6812 | m68hc12 | picochip)
! 		# Motorola 68HC11/12.
  		basic_machine=$basic_machine-unknown
  		os=-none
  		;;
--- 326,332 ----
  	c6x)
  		basic_machine=tic6x-unknown
  		;;
! 	m6811 | m68hc11 | m6812 | m68hc12 | m68hcs12x | nvptx | picochip)
  		basic_machine=$basic_machine-unknown
  		os=-none
  		;;
***************
*** 329,335 ****
  	strongarm | thumb | xscale)
  		basic_machine=arm-unknown
  		;;
! 
  	xscaleeb)
  		basic_machine=armeb-unknown
  		;;
--- 339,348 ----
  	strongarm | thumb | xscale)
  		basic_machine=arm-unknown
  		;;
! 	xgate)
! 		basic_machine=$basic_machine-unknown
! 		os=-none
! 		;;
  	xscaleeb)
  		basic_machine=armeb-unknown
  		;;
***************
*** 352,376 ****
  	# Recognize the basic CPU types with company name.
  	580-* \
  	| a29k-* \
  	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
  	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
! 	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
  	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
  	| avr-* | avr32-* \
  	| bfin-* | bs2000-* \
  	| c[123]* | c30-* | [cjt]90-* | c4x-* \
! 	| clipper-* | craynv-* | cydra-* \
  	| d10v-* | d30v-* | dlx-* \
  	| elxsi-* \
  	| f30[01]-* | f700-* | fido-* | fr30-* | frv-* | fx80-* \
  	| h8300-* | h8500-* \
  	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
  	| i*86-* | i860-* | i960-* | ia64-* \
  	| ip2k-* | iq2000-* \
  	| lm32-* \
  	| m32c-* | m32r-* | m32rle-* \
  	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
! 	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* | microblaze-* \
  	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
  	| mips16-* \
  	| mips64-* | mips64el-* \
--- 365,395 ----
  	# Recognize the basic CPU types with company name.
  	580-* \
  	| a29k-* \
+ 	| aarch64-* | aarch64_be-* \
  	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
  	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
! 	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* | arceb-* \
  	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
  	| avr-* | avr32-* \
+ 	| be32-* | be64-* \
  	| bfin-* | bs2000-* \
  	| c[123]* | c30-* | [cjt]90-* | c4x-* \
! 	| c8051-* | clipper-* | craynv-* | cydra-* \
  	| d10v-* | d30v-* | dlx-* \
  	| elxsi-* \
  	| f30[01]-* | f700-* | fido-* | fr30-* | frv-* | fx80-* \
  	| h8300-* | h8500-* \
  	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
+ 	| hexagon-* \
  	| i*86-* | i860-* | i960-* | ia64-* \
  	| ip2k-* | iq2000-* \
+ 	| k1om-* \
+ 	| le32-* | le64-* \
  	| lm32-* \
  	| m32c-* | m32r-* | m32rle-* \
  	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
! 	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* \
! 	| microblaze-* | microblazeel-* \
  	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
  	| mips16-* \
  	| mips64-* | mips64el-* \
***************
*** 384,406 ****
  	| mips64vr5900-* | mips64vr5900el-* \
  	| mipsisa32-* | mipsisa32el-* \
  	| mipsisa32r2-* | mipsisa32r2el-* \
  	| mipsisa64-* | mipsisa64el-* \
  	| mipsisa64r2-* | mipsisa64r2el-* \
  	| mipsisa64sb1-* | mipsisa64sb1el-* \
  	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
  	| mipstx39-* | mipstx39el-* \
  	| mmix-* \
  	| mt-* \
  	| msp430-* \
  	| nds32-* | nds32le-* | nds32be-* \
! 	| nios-* | nios2-* \
  	| none-* | np1-* | ns16k-* | ns32k-* \
  	| open8-* \
  	| orion-* \
  	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
  	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* \
  	| pyramid-* \
! 	| romp-* | rs6000-* | rx-* \
  	| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \
  	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
  	| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \
--- 403,429 ----
  	| mips64vr5900-* | mips64vr5900el-* \
  	| mipsisa32-* | mipsisa32el-* \
  	| mipsisa32r2-* | mipsisa32r2el-* \
+ 	| mipsisa32r6-* | mipsisa32r6el-* \
  	| mipsisa64-* | mipsisa64el-* \
  	| mipsisa64r2-* | mipsisa64r2el-* \
+ 	| mipsisa64r6-* | mipsisa64r6el-* \
  	| mipsisa64sb1-* | mipsisa64sb1el-* \
  	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
+ 	| mipsr5900-* | mipsr5900el-* \
  	| mipstx39-* | mipstx39el-* \
  	| mmix-* \
  	| mt-* \
  	| msp430-* \
  	| nds32-* | nds32le-* | nds32be-* \
! 	| nios-* | nios2-* | nios2eb-* | nios2el-* \
  	| none-* | np1-* | ns16k-* | ns32k-* \
  	| open8-* \
+ 	| or1k*-* \
  	| orion-* \
  	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
  	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* \
  	| pyramid-* \
! 	| rl78-* | romp-* | rs6000-* | rx-* \
  	| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \
  	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
  	| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \
***************
*** 712,718 ****
  	i370-ibm* | ibm*)
  		basic_machine=i370-ibm
  		;;
- # I'm not sure what "Sysv32" means.  Should this be sysv3.2?
  	i*86v32)
  		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
  		os=-sysv32
--- 735,740 ----
***************
*** 770,780 ****
  		basic_machine=ns32k-utek
  		os=-sysv
  		;;
! 	microblaze)
  		basic_machine=microblaze-xilinx
  		;;
  	mingw32)
! 		basic_machine=i386-pc
  		os=-mingw32
  		;;
  	mingw32ce)
--- 792,806 ----
  		basic_machine=ns32k-utek
  		os=-sysv
  		;;
! 	microblaze*)
  		basic_machine=microblaze-xilinx
  		;;
+ 	mingw64)
+ 		basic_machine=x86_64-pc
+ 		os=-mingw64
+ 		;;
  	mingw32)
! 		basic_machine=i686-pc
  		os=-mingw32
  		;;
  	mingw32ce)
***************
*** 802,807 ****
--- 828,837 ----
  		basic_machine=powerpc-unknown
  		os=-morphos
  		;;
+ 	moxiebox)
+ 		basic_machine=moxie-unknown
+ 		os=-moxiebox
+ 		;;
  	msdos)
  		basic_machine=i386-pc
  		os=-msdos
***************
*** 809,818 ****
--- 839,856 ----
  	ms1-*)
  		basic_machine=`echo $basic_machine | sed -e 's/ms1-/mt-/'`
  		;;
+ 	msys)
+ 		basic_machine=i686-pc
+ 		os=-msys
+ 		;;
  	mvs)
  		basic_machine=i370-ibm
  		os=-mvs
  		;;
+ 	nacl)
+ 		basic_machine=le32-unknown
+ 		os=-nacl
+ 		;;
  	ncr3000)
  		basic_machine=i486-ncr
  		os=-sysv4
***************
*** 993,999 ****
  		basic_machine=i586-unknown
  		os=-pw32
  		;;
! 	rdos)
  		basic_machine=i386-pc
  		os=-rdos
  		;;
--- 1031,1041 ----
  		basic_machine=i586-unknown
  		os=-pw32
  		;;
! 	rdos | rdos64)
! 		basic_machine=x86_64-pc
! 		os=-rdos
! 		;;
! 	rdos32)
  		basic_machine=i386-pc
  		os=-rdos
  		;;
***************
*** 1320,1348 ****
  	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
  	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\
  	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
! 	      | -sym* | -kopensolaris* \
  	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
  	      | -aos* | -aros* \
  	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
  	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
  	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
! 	      | -openbsd* | -solidbsd* \
  	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
  	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
  	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
  	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
  	      | -chorusos* | -chorusrdb* | -cegcc* \
! 	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
! 	      | -mingw32* | -linux-gnu* | -linux-android* \
! 	      | -linux-newlib* | -linux-uclibc* \
! 	      | -uxpv* | -beos* | -mpeix* | -udk* \
  	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
  	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
  	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
  	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
  	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
  	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
! 	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es*)
  	# Remember, each alternative MUST END IN *, to match a version number.
  		;;
  	-qnx*)
--- 1362,1390 ----
  	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
  	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\
  	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
! 	      | -sym* | -kopensolaris* | -plan9* \
  	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
  	      | -aos* | -aros* \
  	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
  	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
  	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
! 	      | -bitrig* | -openbsd* | -solidbsd* \
  	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
  	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
  	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
  	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
  	      | -chorusos* | -chorusrdb* | -cegcc* \
! 	      | -cygwin* | -msys* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
! 	      | -mingw32* | -mingw64* | -linux-gnu* | -linux-android* \
! 	      | -linux-newlib* | -linux-musl* | -linux-uclibc* \
! 	      | -uxpv* | -beos* | -mpeix* | -udk* | -moxiebox* \
  	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
  	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
  	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
  	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
  	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
  	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
! 	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es* | -tirtos*)
  	# Remember, each alternative MUST END IN *, to match a version number.
  		;;
  	-qnx*)
***************
*** 1466,1474 ****
  	-aros*)
  		os=-aros
  		;;
- 	-kaos*)
- 		os=-kaos
- 		;;
  	-zvmoe)
  		os=-zvmoe
  		;;
--- 1508,1513 ----
***************
*** 1517,1522 ****
--- 1556,1567 ----
  	c4x-* | tic4x-*)
  		os=-coff
  		;;
+ 	c8051-*)
+ 		os=-elf
+ 		;;
+ 	hexagon-*)
+ 		os=-elf
+ 		;;
  	tic54x-*)
  		os=-coff
  		;;
***************
*** 1544,1552 ****
  		;;
  	m68000-sun)
  		os=-sunos3
- 		# This also exists in the configure program, but was not the
- 		# default.
- 		# os=-sunos4
  		;;
  	m68*-cisco)
  		os=-aout
--- 1589,1594 ----
diff -cNr ../ntp-4.2.8p2-orig/sntp/libevent/build-aux/config.guess ./sntp/libevent/build-aux/config.guess
*** ../ntp-4.2.8p2-orig/sntp/libevent/build-aux/config.guess	2014-12-19 20:59:16.000000000 +0900
--- ./sntp/libevent/build-aux/config.guess	2015-06-22 02:08:40.897763254 +0900
***************
*** 1,14 ****
  #! /bin/sh
  # Attempt to guess a canonical system name.
! #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
! #   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
! #   2011 Free Software Foundation, Inc.
  
! timestamp='2011-06-03'
  
  # This file is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License as published by
! # the Free Software Foundation; either version 2 of the License, or
  # (at your option) any later version.
  #
  # This program is distributed in the hope that it will be useful, but
--- 1,12 ----
  #! /bin/sh
  # Attempt to guess a canonical system name.
! #   Copyright 1992-2014 Free Software Foundation, Inc.
  
! timestamp='2014-03-23'
  
  # This file is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License as published by
! # the Free Software Foundation; either version 3 of the License, or
  # (at your option) any later version.
  #
  # This program is distributed in the hope that it will be useful, but
***************
*** 17,42 ****
  # General Public License for more details.
  #
  # You should have received a copy of the GNU General Public License
! # along with this program; if not, write to the Free Software
! # Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
! # 02110-1301, USA.
  #
  # As a special exception to the GNU General Public License, if you
  # distribute this file as part of a program that contains a
  # configuration script generated by Autoconf, you may include it under
! # the same distribution terms that you use for the rest of that program.
! 
! 
! # Originally written by Per Bothner.  Please send patches (context
! # diff format) to <config-patches@gnu.org> and include a ChangeLog
! # entry.
  #
! # This script attempts to guess a canonical system name similar to
! # config.sub.  If it succeeds, it prints the system name on stdout, and
! # exits with 0.  Otherwise, it exits with 1.
  #
  # You can get the latest version of this script from:
  # http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
  
  me=`echo "$0" | sed -e 's,.*/,,'`
  
--- 15,36 ----
  # General Public License for more details.
  #
  # You should have received a copy of the GNU General Public License
! # along with this program; if not, see <http://www.gnu.org/licenses/>.
  #
  # As a special exception to the GNU General Public License, if you
  # distribute this file as part of a program that contains a
  # configuration script generated by Autoconf, you may include it under
! # the same distribution terms that you use for the rest of that
! # program.  This Exception is an additional permission under section 7
! # of the GNU General Public License, version 3 ("GPLv3").
  #
! # Originally written by Per Bothner.
  #
  # You can get the latest version of this script from:
  # http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
+ #
+ # Please send patches with a ChangeLog entry to config-patches@gnu.org.
+ 
  
  me=`echo "$0" | sed -e 's,.*/,,'`
  
***************
*** 56,64 ****
  GNU config.guess ($timestamp)
  
  Originally written by Per Bothner.
! Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
! 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011 Free
! Software Foundation, Inc.
  
  This is free software; see the source for copying conditions.  There is NO
  warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
--- 50,56 ----
  GNU config.guess ($timestamp)
  
  Originally written by Per Bothner.
! Copyright 1992-2014 Free Software Foundation, Inc.
  
  This is free software; see the source for copying conditions.  There is NO
  warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
***************
*** 140,151 ****
  UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
  UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
  
  # Note: order is significant - the case branches are not exclusive.
  
  case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
      *:NetBSD:*:*)
  	# NetBSD (nbsd) targets should (where applicable) match one or
! 	# more of the tupples: *-*-netbsdelf*, *-*-netbsdaout*,
  	# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently
  	# switched to ELF, *-*-netbsd* would select the old
  	# object file format.  This provides both forward
--- 132,164 ----
  UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
  UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
  
+ case "${UNAME_SYSTEM}" in
+ Linux|GNU|GNU/*)
+ 	# If the system lacks a compiler, then just pick glibc.
+ 	# We could probably try harder.
+ 	LIBC=gnu
+ 
+ 	eval $set_cc_for_build
+ 	cat <<-EOF > $dummy.c
+ 	#include <features.h>
+ 	#if defined(__UCLIBC__)
+ 	LIBC=uclibc
+ 	#elif defined(__dietlibc__)
+ 	LIBC=dietlibc
+ 	#else
+ 	LIBC=gnu
+ 	#endif
+ 	EOF
+ 	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC' | sed 's, ,,g'`
+ 	;;
+ esac
+ 
  # Note: order is significant - the case branches are not exclusive.
  
  case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
      *:NetBSD:*:*)
  	# NetBSD (nbsd) targets should (where applicable) match one or
! 	# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,
  	# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently
  	# switched to ELF, *-*-netbsd* would select the old
  	# object file format.  This provides both forward
***************
*** 202,207 ****
--- 215,224 ----
  	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
  	echo "${machine}-${os}${release}"
  	exit ;;
+     *:Bitrig:*:*)
+ 	UNAME_MACHINE_ARCH=`arch | sed 's/Bitrig.//'`
+ 	echo ${UNAME_MACHINE_ARCH}-unknown-bitrig${UNAME_RELEASE}
+ 	exit ;;
      *:OpenBSD:*:*)
  	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
  	echo ${UNAME_MACHINE_ARCH}-unknown-openbsd${UNAME_RELEASE}
***************
*** 304,310 ****
      arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
  	echo arm-acorn-riscix${UNAME_RELEASE}
  	exit ;;
!     arm:riscos:*:*|arm:RISCOS:*:*)
  	echo arm-unknown-riscos
  	exit ;;
      SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
--- 321,327 ----
      arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
  	echo arm-acorn-riscix${UNAME_RELEASE}
  	exit ;;
!     arm*:riscos:*:*|arm*:RISCOS:*:*)
  	echo arm-unknown-riscos
  	exit ;;
      SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
***************
*** 792,812 ****
  	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
  	exit ;;
      *:FreeBSD:*:*)
! 	case ${UNAME_MACHINE} in
! 	    pc98)
! 		echo i386-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
  	    amd64)
  		echo x86_64-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
  	    *)
! 		echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
  	esac
  	exit ;;
      i*:CYGWIN*:*)
  	echo ${UNAME_MACHINE}-pc-cygwin
  	exit ;;
      *:MINGW*:*)
  	echo ${UNAME_MACHINE}-pc-mingw32
  	exit ;;
      i*:windows32*:*)
  	# uname -m includes "-pc" on this system.
  	echo ${UNAME_MACHINE}-mingw32
--- 809,834 ----
  	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
  	exit ;;
      *:FreeBSD:*:*)
! 	UNAME_PROCESSOR=`/usr/bin/uname -p`
! 	case ${UNAME_PROCESSOR} in
  	    amd64)
  		echo x86_64-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
  	    *)
! 		echo ${UNAME_PROCESSOR}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
  	esac
  	exit ;;
      i*:CYGWIN*:*)
  	echo ${UNAME_MACHINE}-pc-cygwin
  	exit ;;
+     *:MINGW64*:*)
+ 	echo ${UNAME_MACHINE}-pc-mingw64
+ 	exit ;;
      *:MINGW*:*)
  	echo ${UNAME_MACHINE}-pc-mingw32
  	exit ;;
+     *:MSYS*:*)
+ 	echo ${UNAME_MACHINE}-pc-msys
+ 	exit ;;
      i*:windows32*:*)
  	# uname -m includes "-pc" on this system.
  	echo ${UNAME_MACHINE}-mingw32
***************
*** 852,866 ****
  	exit ;;
      *:GNU:*:*)
  	# the GNU system
! 	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
  	exit ;;
      *:GNU/*:*:*)
  	# other systems with GNU libc and userland
! 	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-gnu
  	exit ;;
      i*86:Minix:*:*)
  	echo ${UNAME_MACHINE}-pc-minix
  	exit ;;
      alpha:Linux:*:*)
  	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
  	  EV5)   UNAME_MACHINE=alphaev5 ;;
--- 874,895 ----
  	exit ;;
      *:GNU:*:*)
  	# the GNU system
! 	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-${LIBC}`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
  	exit ;;
      *:GNU/*:*:*)
  	# other systems with GNU libc and userland
! 	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-${LIBC}
  	exit ;;
      i*86:Minix:*:*)
  	echo ${UNAME_MACHINE}-pc-minix
  	exit ;;
+     aarch64:Linux:*:*)
+ 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+ 	exit ;;
+     aarch64_be:Linux:*:*)
+ 	UNAME_MACHINE=aarch64_be
+ 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+ 	exit ;;
      alpha:Linux:*:*)
  	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
  	  EV5)   UNAME_MACHINE=alphaev5 ;;
***************
*** 872,927 ****
  	  EV68*) UNAME_MACHINE=alphaev68 ;;
  	esac
  	objdump --private-headers /bin/sh | grep -q ld.so.1
! 	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
  	exit ;;
      arm*:Linux:*:*)
  	eval $set_cc_for_build
  	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
  	    | grep -q __ARM_EABI__
  	then
! 	    echo ${UNAME_MACHINE}-unknown-linux-gnu
  	else
  	    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
  		| grep -q __ARM_PCS_VFP
  	    then
! 		echo ${UNAME_MACHINE}-unknown-linux-gnueabi
  	    else
! 		echo ${UNAME_MACHINE}-unknown-linux-gnueabihf
  	    fi
  	fi
  	exit ;;
      avr32*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      cris:Linux:*:*)
! 	echo cris-axis-linux-gnu
  	exit ;;
      crisv32:Linux:*:*)
! 	echo crisv32-axis-linux-gnu
  	exit ;;
      frv:Linux:*:*)
! 	echo frv-unknown-linux-gnu
  	exit ;;
      i*86:Linux:*:*)
! 	LIBC=gnu
! 	eval $set_cc_for_build
! 	sed 's/^	//' << EOF >$dummy.c
! 	#ifdef __dietlibc__
! 	LIBC=dietlibc
! 	#endif
! EOF
! 	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC'`
! 	echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
  	exit ;;
      ia64:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      m32r*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      m68*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      mips:Linux:*:* | mips64:Linux:*:*)
  	eval $set_cc_for_build
--- 901,954 ----
  	  EV68*) UNAME_MACHINE=alphaev68 ;;
  	esac
  	objdump --private-headers /bin/sh | grep -q ld.so.1
! 	if test "$?" = 0 ; then LIBC="gnulibc1" ; fi
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
! 	exit ;;
!     arc:Linux:*:* | arceb:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      arm*:Linux:*:*)
  	eval $set_cc_for_build
  	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
  	    | grep -q __ARM_EABI__
  	then
! 	    echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	else
  	    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
  		| grep -q __ARM_PCS_VFP
  	    then
! 		echo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabi
  	    else
! 		echo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabihf
  	    fi
  	fi
  	exit ;;
      avr32*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      cris:Linux:*:*)
! 	echo ${UNAME_MACHINE}-axis-linux-${LIBC}
  	exit ;;
      crisv32:Linux:*:*)
! 	echo ${UNAME_MACHINE}-axis-linux-${LIBC}
  	exit ;;
      frv:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
! 	exit ;;
!     hexagon:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      i*86:Linux:*:*)
! 	echo ${UNAME_MACHINE}-pc-linux-${LIBC}
  	exit ;;
      ia64:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      m32r*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      m68*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      mips:Linux:*:* | mips64:Linux:*:*)
  	eval $set_cc_for_build
***************
*** 940,993 ****
  	#endif
  EOF
  	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`
! 	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
  	;;
!     or32:Linux:*:*)
! 	echo or32-unknown-linux-gnu
  	exit ;;
      padre:Linux:*:*)
! 	echo sparc-unknown-linux-gnu
  	exit ;;
      parisc64:Linux:*:* | hppa64:Linux:*:*)
! 	echo hppa64-unknown-linux-gnu
  	exit ;;
      parisc:Linux:*:* | hppa:Linux:*:*)
  	# Look for CPU level
  	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
! 	  PA7*) echo hppa1.1-unknown-linux-gnu ;;
! 	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
! 	  *)    echo hppa-unknown-linux-gnu ;;
  	esac
  	exit ;;
      ppc64:Linux:*:*)
! 	echo powerpc64-unknown-linux-gnu
  	exit ;;
      ppc:Linux:*:*)
! 	echo powerpc-unknown-linux-gnu
  	exit ;;
      s390:Linux:*:* | s390x:Linux:*:*)
! 	echo ${UNAME_MACHINE}-ibm-linux
  	exit ;;
      sh64*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      sh*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      sparc:Linux:*:* | sparc64:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      tile*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      vax:Linux:*:*)
! 	echo ${UNAME_MACHINE}-dec-linux-gnu
  	exit ;;
      x86_64:Linux:*:*)
! 	echo x86_64-unknown-linux-gnu
  	exit ;;
      xtensa*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-gnu
  	exit ;;
      i*86:DYNIX/ptx:4*:*)
  	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
--- 967,1029 ----
  	#endif
  EOF
  	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`
! 	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-${LIBC}"; exit; }
  	;;
!     openrisc*:Linux:*:*)
! 	echo or1k-unknown-linux-${LIBC}
! 	exit ;;
!     or32:Linux:*:* | or1k*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      padre:Linux:*:*)
! 	echo sparc-unknown-linux-${LIBC}
  	exit ;;
      parisc64:Linux:*:* | hppa64:Linux:*:*)
! 	echo hppa64-unknown-linux-${LIBC}
  	exit ;;
      parisc:Linux:*:* | hppa:Linux:*:*)
  	# Look for CPU level
  	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
! 	  PA7*) echo hppa1.1-unknown-linux-${LIBC} ;;
! 	  PA8*) echo hppa2.0-unknown-linux-${LIBC} ;;
! 	  *)    echo hppa-unknown-linux-${LIBC} ;;
  	esac
  	exit ;;
      ppc64:Linux:*:*)
! 	echo powerpc64-unknown-linux-${LIBC}
  	exit ;;
      ppc:Linux:*:*)
! 	echo powerpc-unknown-linux-${LIBC}
! 	exit ;;
!     ppc64le:Linux:*:*)
! 	echo powerpc64le-unknown-linux-${LIBC}
! 	exit ;;
!     ppcle:Linux:*:*)
! 	echo powerpcle-unknown-linux-${LIBC}
  	exit ;;
      s390:Linux:*:* | s390x:Linux:*:*)
! 	echo ${UNAME_MACHINE}-ibm-linux-${LIBC}
  	exit ;;
      sh64*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      sh*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      sparc:Linux:*:* | sparc64:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      tile*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      vax:Linux:*:*)
! 	echo ${UNAME_MACHINE}-dec-linux-${LIBC}
  	exit ;;
      x86_64:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      xtensa*:Linux:*:*)
! 	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
  	exit ;;
      i*86:DYNIX/ptx:4*:*)
  	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
***************
*** 1191,1196 ****
--- 1227,1235 ----
      BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.
  	echo i586-pc-haiku
  	exit ;;
+     x86_64:Haiku:*:*)
+ 	echo x86_64-unknown-haiku
+ 	exit ;;
      SX-4:SUPER-UX:*:*)
  	echo sx4-nec-superux${UNAME_RELEASE}
  	exit ;;
***************
*** 1217,1235 ****
  	exit ;;
      *:Darwin:*:*)
  	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
! 	case $UNAME_PROCESSOR in
! 	    i386)
! 		eval $set_cc_for_build
! 		if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
! 		  if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
! 		      (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
! 		      grep IS_64BIT_ARCH >/dev/null
! 		  then
! 		      UNAME_PROCESSOR="x86_64"
! 		  fi
! 		fi ;;
! 	    unknown) UNAME_PROCESSOR=powerpc ;;
! 	esac
  	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
  	exit ;;
      *:procnto*:*:* | *:QNX:[0123456789]*:*)
--- 1256,1286 ----
  	exit ;;
      *:Darwin:*:*)
  	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
! 	eval $set_cc_for_build
! 	if test "$UNAME_PROCESSOR" = unknown ; then
! 	    UNAME_PROCESSOR=powerpc
! 	fi
! 	if test `echo "$UNAME_RELEASE" | sed -e 's/\..*//'` -le 10 ; then
! 	    if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
! 		if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
! 		    (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
! 		    grep IS_64BIT_ARCH >/dev/null
! 		then
! 		    case $UNAME_PROCESSOR in
! 			i386) UNAME_PROCESSOR=x86_64 ;;
! 			powerpc) UNAME_PROCESSOR=powerpc64 ;;
! 		    esac
! 		fi
! 	    fi
! 	elif test "$UNAME_PROCESSOR" = i386 ; then
! 	    # Avoid executing cc on OS X 10.9, as it ships with a stub
! 	    # that puts up a graphical alert prompting to install
! 	    # developer tools.  Any system running Mac OS X 10.7 or
! 	    # later (Darwin 11 and later) is required to have a 64-bit
! 	    # processor. This is not true of the ARM version of Darwin
! 	    # that Apple uses in portable devices.
! 	    UNAME_PROCESSOR=x86_64
! 	fi
  	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
  	exit ;;
      *:procnto*:*:* | *:QNX:[0123456789]*:*)
***************
*** 1246,1252 ****
      NEO-?:NONSTOP_KERNEL:*:*)
  	echo neo-tandem-nsk${UNAME_RELEASE}
  	exit ;;
!     NSE-?:NONSTOP_KERNEL:*:*)
  	echo nse-tandem-nsk${UNAME_RELEASE}
  	exit ;;
      NSR-?:NONSTOP_KERNEL:*:*)
--- 1297,1303 ----
      NEO-?:NONSTOP_KERNEL:*:*)
  	echo neo-tandem-nsk${UNAME_RELEASE}
  	exit ;;
!     NSE-*:NONSTOP_KERNEL:*:*)
  	echo nse-tandem-nsk${UNAME_RELEASE}
  	exit ;;
      NSR-?:NONSTOP_KERNEL:*:*)
***************
*** 1315,1472 ****
      i*86:AROS:*:*)
  	echo ${UNAME_MACHINE}-pc-aros
  	exit ;;
! esac
! 
! #echo '(No uname command or uname output not recognized.)' 1>&2
! #echo "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" 1>&2
! 
! eval $set_cc_for_build
! cat >$dummy.c <<EOF
! #ifdef _SEQUENT_
! # include <sys/types.h>
! # include <sys/utsname.h>
! #endif
! main ()
! {
! #if defined (sony)
! #if defined (MIPSEB)
!   /* BFD wants "bsd" instead of "newsos".  Perhaps BFD should be changed,
!      I don't know....  */
!   printf ("mips-sony-bsd\n"); exit (0);
! #else
! #include <sys/param.h>
!   printf ("m68k-sony-newsos%s\n",
! #ifdef NEWSOS4
! 	"4"
! #else
! 	""
! #endif
! 	); exit (0);
! #endif
! #endif
! 
! #if defined (__arm) && defined (__acorn) && defined (__unix)
!   printf ("arm-acorn-riscix\n"); exit (0);
! #endif
! 
! #if defined (hp300) && !defined (hpux)
!   printf ("m68k-hp-bsd\n"); exit (0);
! #endif
! 
! #if defined (NeXT)
! #if !defined (__ARCHITECTURE__)
! #define __ARCHITECTURE__ "m68k"
! #endif
!   int version;
!   version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null`;
!   if (version < 4)
!     printf ("%s-next-nextstep%d\n", __ARCHITECTURE__, version);
!   else
!     printf ("%s-next-openstep%d\n", __ARCHITECTURE__, version);
!   exit (0);
! #endif
! 
! #if defined (MULTIMAX) || defined (n16)
! #if defined (UMAXV)
!   printf ("ns32k-encore-sysv\n"); exit (0);
! #else
! #if defined (CMU)
!   printf ("ns32k-encore-mach\n"); exit (0);
! #else
!   printf ("ns32k-encore-bsd\n"); exit (0);
! #endif
! #endif
! #endif
! 
! #if defined (__386BSD__)
!   printf ("i386-pc-bsd\n"); exit (0);
! #endif
! 
! #if defined (sequent)
! #if defined (i386)
!   printf ("i386-sequent-dynix\n"); exit (0);
! #endif
! #if defined (ns32000)
!   printf ("ns32k-sequent-dynix\n"); exit (0);
! #endif
! #endif
! 
! #if defined (_SEQUENT_)
!     struct utsname un;
! 
!     uname(&un);
! 
!     if (strncmp(un.version, "V2", 2) == 0) {
! 	printf ("i386-sequent-ptx2\n"); exit (0);
!     }
!     if (strncmp(un.version, "V1", 2) == 0) { /* XXX is V1 correct? */
! 	printf ("i386-sequent-ptx1\n"); exit (0);
!     }
!     printf ("i386-sequent-ptx\n"); exit (0);
! 
! #endif
! 
! #if defined (vax)
! # if !defined (ultrix)
! #  include <sys/param.h>
! #  if defined (BSD)
! #   if BSD == 43
!       printf ("vax-dec-bsd4.3\n"); exit (0);
! #   else
! #    if BSD == 199006
!       printf ("vax-dec-bsd4.3reno\n"); exit (0);
! #    else
!       printf ("vax-dec-bsd\n"); exit (0);
! #    endif
! #   endif
! #  else
!     printf ("vax-dec-bsd\n"); exit (0);
! #  endif
! # else
!     printf ("vax-dec-ultrix\n"); exit (0);
! # endif
! #endif
! 
! #if defined (alliant) && defined (i860)
!   printf ("i860-alliant-bsd\n"); exit (0);
! #endif
! 
!   exit (1);
! }
! EOF
! 
! $CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && SYSTEM_NAME=`$dummy` &&
! 	{ echo "$SYSTEM_NAME"; exit; }
! 
! # Apollos put the system type in the environment.
! 
! test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit; }
! 
! # Convex versions that predate uname can use getsysinfo(1)
! 
! if [ -x /usr/convex/getsysinfo ]
! then
!     case `getsysinfo -f cpu_type` in
!     c1*)
! 	echo c1-convex-bsd
  	exit ;;
!     c2*)
! 	if getsysinfo -f scalar_acc
! 	then echo c32-convex-bsd
! 	else echo c2-convex-bsd
! 	fi
! 	exit ;;
!     c34*)
! 	echo c34-convex-bsd
! 	exit ;;
!     c38*)
! 	echo c38-convex-bsd
! 	exit ;;
!     c4*)
! 	echo c4-convex-bsd
! 	exit ;;
!     esac
! fi
  
  cat >&2 <<EOF
  $0: unable to guess system type
--- 1366,1375 ----
      i*86:AROS:*:*)
  	echo ${UNAME_MACHINE}-pc-aros
  	exit ;;
!     x86_64:VMkernel:*:*)
! 	echo ${UNAME_MACHINE}-unknown-esx
  	exit ;;
! esac
  
  cat >&2 <<EOF
  $0: unable to guess system type
diff -cNr ../ntp-4.2.8p2-orig/sntp/libevent/build-aux/config.sub ./sntp/libevent/build-aux/config.sub
*** ../ntp-4.2.8p2-orig/sntp/libevent/build-aux/config.sub	2014-12-19 20:59:16.000000000 +0900
--- ./sntp/libevent/build-aux/config.sub	2015-06-22 02:08:40.898763295 +0900
***************
*** 1,38 ****
  #! /bin/sh
  # Configuration validation subroutine script.
! #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
! #   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
! #   2011 Free Software Foundation, Inc.
! 
! timestamp='2011-06-03'
! 
! # This file is (in principle) common to ALL GNU software.
! # The presence of a machine in this file suggests that SOME GNU software
! # can handle that machine.  It does not imply ALL GNU software can.
! #
! # This file is free software; you can redistribute it and/or modify
! # it under the terms of the GNU General Public License as published by
! # the Free Software Foundation; either version 2 of the License, or
  # (at your option) any later version.
  #
! # This program is distributed in the hope that it will be useful,
! # but WITHOUT ANY WARRANTY; without even the implied warranty of
! # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
! # GNU General Public License for more details.
  #
  # You should have received a copy of the GNU General Public License
! # along with this program; if not, write to the Free Software
! # Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
! # 02110-1301, USA.
  #
  # As a special exception to the GNU General Public License, if you
  # distribute this file as part of a program that contains a
  # configuration script generated by Autoconf, you may include it under
! # the same distribution terms that you use for the rest of that program.
  
  
! # Please send patches to <config-patches@gnu.org>.  Submit a context
! # diff and a properly formatted GNU ChangeLog entry.
  #
  # Configuration subroutine to validate and canonicalize a configuration type.
  # Supply the specified configuration type as an argument.
--- 1,31 ----
  #! /bin/sh
  # Configuration validation subroutine script.
! #   Copyright 1992-2014 Free Software Foundation, Inc.
! 
! timestamp='2014-07-28'
! 
! # This file is free software; you can redistribute it and/or modify it
! # under the terms of the GNU General Public License as published by
! # the Free Software Foundation; either version 3 of the License, or
  # (at your option) any later version.
  #
! # This program is distributed in the hope that it will be useful, but
! # WITHOUT ANY WARRANTY; without even the implied warranty of
! # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
! # General Public License for more details.
  #
  # You should have received a copy of the GNU General Public License
! # along with this program; if not, see <http://www.gnu.org/licenses/>.
  #
  # As a special exception to the GNU General Public License, if you
  # distribute this file as part of a program that contains a
  # configuration script generated by Autoconf, you may include it under
! # the same distribution terms that you use for the rest of that
! # program.  This Exception is an additional permission under section 7
! # of the GNU General Public License, version 3 ("GPLv3").
  
  
! # Please send patches with a ChangeLog entry to config-patches@gnu.org.
  #
  # Configuration subroutine to validate and canonicalize a configuration type.
  # Supply the specified configuration type as an argument.
***************
*** 75,83 ****
  version="\
  GNU config.sub ($timestamp)
  
! Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
! 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011 Free
! Software Foundation, Inc.
  
  This is free software; see the source for copying conditions.  There is NO
  warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
--- 68,74 ----
  version="\
  GNU config.sub ($timestamp)
  
! Copyright 1992-2014 Free Software Foundation, Inc.
  
  This is free software; see the source for copying conditions.  There is NO
  warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
***************
*** 125,137 ****
  maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
  case $maybe_os in
    nto-qnx* | linux-gnu* | linux-android* | linux-dietlibc | linux-newlib* | \
!   linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | \
    knetbsd*-gnu* | netbsd*-gnu* | \
    kopensolaris*-gnu* | \
    storm-chaos* | os2-emx* | rtmk-nova*)
      os=-$maybe_os
      basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
      ;;
    *)
      basic_machine=`echo $1 | sed 's/-[^-]*$//'`
      if [ $basic_machine != $1 ]
--- 116,132 ----
  maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
  case $maybe_os in
    nto-qnx* | linux-gnu* | linux-android* | linux-dietlibc | linux-newlib* | \
!   linux-musl* | linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | \
    knetbsd*-gnu* | netbsd*-gnu* | \
    kopensolaris*-gnu* | \
    storm-chaos* | os2-emx* | rtmk-nova*)
      os=-$maybe_os
      basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
      ;;
+   android-linux)
+     os=-linux-android
+     basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`-unknown
+     ;;
    *)
      basic_machine=`echo $1 | sed 's/-[^-]*$//'`
      if [ $basic_machine != $1 ]
***************
*** 154,160 ****
  	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
  	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
  	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
! 	-apple | -axis | -knuth | -cray | -microblaze)
  		os=
  		basic_machine=$1
  		;;
--- 149,155 ----
  	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
  	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
  	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
! 	-apple | -axis | -knuth | -cray | -microblaze*)
  		os=
  		basic_machine=$1
  		;;
***************
*** 223,228 ****
--- 218,229 ----
  	-isc*)
  		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
  		;;
+ 	-lynx*178)
+ 		os=-lynxos178
+ 		;;
+ 	-lynx*5)
+ 		os=-lynxos5
+ 		;;
  	-lynx*)
  		os=-lynxos
  		;;
***************
*** 247,266 ****
  	# Some are omitted here because they have special meanings below.
  	1750a | 580 \
  	| a29k \
  	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
  	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
  	| am33_2.0 \
! 	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr | avr32 \
  	| bfin \
! 	| c4x | clipper \
  	| d10v | d30v | dlx | dsp16xx \
  	| fido | fr30 | frv \
  	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
  	| i370 | i860 | i960 | ia64 \
  	| ip2k | iq2000 \
  	| lm32 \
  	| m32c | m32r | m32rle | m68000 | m68k | m88k \
! 	| maxq | mb | microblaze | mcore | mep | metag \
  	| mips | mipsbe | mipseb | mipsel | mipsle \
  	| mips16 \
  	| mips64 | mips64el \
--- 248,275 ----
  	# Some are omitted here because they have special meanings below.
  	1750a | 580 \
  	| a29k \
+ 	| aarch64 | aarch64_be \
  	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
  	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
  	| am33_2.0 \
! 	| arc | arceb \
! 	| arm | arm[bl]e | arme[lb] | armv[2-8] | armv[3-8][lb] | armv7[arm] \
! 	| avr | avr32 \
! 	| be32 | be64 \
  	| bfin \
! 	| c4x | c8051 | clipper \
  	| d10v | d30v | dlx | dsp16xx \
+ 	| epiphany \
  	| fido | fr30 | frv \
  	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
+ 	| hexagon \
  	| i370 | i860 | i960 | ia64 \
  	| ip2k | iq2000 \
+ 	| k1om \
+ 	| le32 | le64 \
  	| lm32 \
  	| m32c | m32r | m32rle | m68000 | m68k | m88k \
! 	| maxq | mb | microblaze | microblazeel | mcore | mep | metag \
  	| mips | mipsbe | mipseb | mipsel | mipsle \
  	| mips16 \
  	| mips64 | mips64el \
***************
*** 274,297 ****
  	| mips64vr5900 | mips64vr5900el \
  	| mipsisa32 | mipsisa32el \
  	| mipsisa32r2 | mipsisa32r2el \
  	| mipsisa64 | mipsisa64el \
  	| mipsisa64r2 | mipsisa64r2el \
  	| mipsisa64sb1 | mipsisa64sb1el \
  	| mipsisa64sr71k | mipsisa64sr71kel \
  	| mipstx39 | mipstx39el \
  	| mn10200 | mn10300 \
  	| moxie \
  	| mt \
  	| msp430 \
  	| nds32 | nds32le | nds32be \
! 	| nios | nios2 \
  	| ns16k | ns32k \
! 	| open8 \
! 	| or32 \
  	| pdp10 | pdp11 | pj | pjl \
  	| powerpc | powerpc64 | powerpc64le | powerpcle \
  	| pyramid \
! 	| rx \
  	| score \
  	| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[34]eb | sheb | shbe | shle | sh[1234]le | sh3ele \
  	| sh64 | sh64le \
--- 283,308 ----
  	| mips64vr5900 | mips64vr5900el \
  	| mipsisa32 | mipsisa32el \
  	| mipsisa32r2 | mipsisa32r2el \
+ 	| mipsisa32r6 | mipsisa32r6el \
  	| mipsisa64 | mipsisa64el \
  	| mipsisa64r2 | mipsisa64r2el \
+ 	| mipsisa64r6 | mipsisa64r6el \
  	| mipsisa64sb1 | mipsisa64sb1el \
  	| mipsisa64sr71k | mipsisa64sr71kel \
+ 	| mipsr5900 | mipsr5900el \
  	| mipstx39 | mipstx39el \
  	| mn10200 | mn10300 \
  	| moxie \
  	| mt \
  	| msp430 \
  	| nds32 | nds32le | nds32be \
! 	| nios | nios2 | nios2eb | nios2el \
  	| ns16k | ns32k \
! 	| open8 | or1k | or1knd | or32 \
  	| pdp10 | pdp11 | pj | pjl \
  	| powerpc | powerpc64 | powerpc64le | powerpcle \
  	| pyramid \
! 	| rl78 | rx \
  	| score \
  	| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[34]eb | sheb | shbe | shle | sh[1234]le | sh3ele \
  	| sh64 | sh64le \
***************
*** 315,322 ****
  	c6x)
  		basic_machine=tic6x-unknown
  		;;
! 	m6811 | m68hc11 | m6812 | m68hc12 | picochip)
! 		# Motorola 68HC11/12.
  		basic_machine=$basic_machine-unknown
  		os=-none
  		;;
--- 326,332 ----
  	c6x)
  		basic_machine=tic6x-unknown
  		;;
! 	m6811 | m68hc11 | m6812 | m68hc12 | m68hcs12x | nvptx | picochip)
  		basic_machine=$basic_machine-unknown
  		os=-none
  		;;
***************
*** 329,335 ****
  	strongarm | thumb | xscale)
  		basic_machine=arm-unknown
  		;;
! 
  	xscaleeb)
  		basic_machine=armeb-unknown
  		;;
--- 339,348 ----
  	strongarm | thumb | xscale)
  		basic_machine=arm-unknown
  		;;
! 	xgate)
! 		basic_machine=$basic_machine-unknown
! 		os=-none
! 		;;
  	xscaleeb)
  		basic_machine=armeb-unknown
  		;;
***************
*** 352,376 ****
  	# Recognize the basic CPU types with company name.
  	580-* \
  	| a29k-* \
  	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
  	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
! 	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
  	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
  	| avr-* | avr32-* \
  	| bfin-* | bs2000-* \
  	| c[123]* | c30-* | [cjt]90-* | c4x-* \
! 	| clipper-* | craynv-* | cydra-* \
  	| d10v-* | d30v-* | dlx-* \
  	| elxsi-* \
  	| f30[01]-* | f700-* | fido-* | fr30-* | frv-* | fx80-* \
  	| h8300-* | h8500-* \
  	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
  	| i*86-* | i860-* | i960-* | ia64-* \
  	| ip2k-* | iq2000-* \
  	| lm32-* \
  	| m32c-* | m32r-* | m32rle-* \
  	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
! 	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* | microblaze-* \
  	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
  	| mips16-* \
  	| mips64-* | mips64el-* \
--- 365,395 ----
  	# Recognize the basic CPU types with company name.
  	580-* \
  	| a29k-* \
+ 	| aarch64-* | aarch64_be-* \
  	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
  	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
! 	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* | arceb-* \
  	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
  	| avr-* | avr32-* \
+ 	| be32-* | be64-* \
  	| bfin-* | bs2000-* \
  	| c[123]* | c30-* | [cjt]90-* | c4x-* \
! 	| c8051-* | clipper-* | craynv-* | cydra-* \
  	| d10v-* | d30v-* | dlx-* \
  	| elxsi-* \
  	| f30[01]-* | f700-* | fido-* | fr30-* | frv-* | fx80-* \
  	| h8300-* | h8500-* \
  	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
+ 	| hexagon-* \
  	| i*86-* | i860-* | i960-* | ia64-* \
  	| ip2k-* | iq2000-* \
+ 	| k1om-* \
+ 	| le32-* | le64-* \
  	| lm32-* \
  	| m32c-* | m32r-* | m32rle-* \
  	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
! 	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* \
! 	| microblaze-* | microblazeel-* \
  	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
  	| mips16-* \
  	| mips64-* | mips64el-* \
***************
*** 384,406 ****
  	| mips64vr5900-* | mips64vr5900el-* \
  	| mipsisa32-* | mipsisa32el-* \
  	| mipsisa32r2-* | mipsisa32r2el-* \
  	| mipsisa64-* | mipsisa64el-* \
  	| mipsisa64r2-* | mipsisa64r2el-* \
  	| mipsisa64sb1-* | mipsisa64sb1el-* \
  	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
  	| mipstx39-* | mipstx39el-* \
  	| mmix-* \
  	| mt-* \
  	| msp430-* \
  	| nds32-* | nds32le-* | nds32be-* \
! 	| nios-* | nios2-* \
  	| none-* | np1-* | ns16k-* | ns32k-* \
  	| open8-* \
  	| orion-* \
  	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
  	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* \
  	| pyramid-* \
! 	| romp-* | rs6000-* | rx-* \
  	| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \
  	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
  	| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \
--- 403,429 ----
  	| mips64vr5900-* | mips64vr5900el-* \
  	| mipsisa32-* | mipsisa32el-* \
  	| mipsisa32r2-* | mipsisa32r2el-* \
+ 	| mipsisa32r6-* | mipsisa32r6el-* \
  	| mipsisa64-* | mipsisa64el-* \
  	| mipsisa64r2-* | mipsisa64r2el-* \
+ 	| mipsisa64r6-* | mipsisa64r6el-* \
  	| mipsisa64sb1-* | mipsisa64sb1el-* \
  	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
+ 	| mipsr5900-* | mipsr5900el-* \
  	| mipstx39-* | mipstx39el-* \
  	| mmix-* \
  	| mt-* \
  	| msp430-* \
  	| nds32-* | nds32le-* | nds32be-* \
! 	| nios-* | nios2-* | nios2eb-* | nios2el-* \
  	| none-* | np1-* | ns16k-* | ns32k-* \
  	| open8-* \
+ 	| or1k*-* \
  	| orion-* \
  	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
  	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* \
  	| pyramid-* \
! 	| rl78-* | romp-* | rs6000-* | rx-* \
  	| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \
  	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
  	| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \
***************
*** 712,718 ****
  	i370-ibm* | ibm*)
  		basic_machine=i370-ibm
  		;;
- # I'm not sure what "Sysv32" means.  Should this be sysv3.2?
  	i*86v32)
  		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
  		os=-sysv32
--- 735,740 ----
***************
*** 770,780 ****
  		basic_machine=ns32k-utek
  		os=-sysv
  		;;
! 	microblaze)
  		basic_machine=microblaze-xilinx
  		;;
  	mingw32)
! 		basic_machine=i386-pc
  		os=-mingw32
  		;;
  	mingw32ce)
--- 792,806 ----
  		basic_machine=ns32k-utek
  		os=-sysv
  		;;
! 	microblaze*)
  		basic_machine=microblaze-xilinx
  		;;
+ 	mingw64)
+ 		basic_machine=x86_64-pc
+ 		os=-mingw64
+ 		;;
  	mingw32)
! 		basic_machine=i686-pc
  		os=-mingw32
  		;;
  	mingw32ce)
***************
*** 802,807 ****
--- 828,837 ----
  		basic_machine=powerpc-unknown
  		os=-morphos
  		;;
+ 	moxiebox)
+ 		basic_machine=moxie-unknown
+ 		os=-moxiebox
+ 		;;
  	msdos)
  		basic_machine=i386-pc
  		os=-msdos
***************
*** 809,818 ****
--- 839,856 ----
  	ms1-*)
  		basic_machine=`echo $basic_machine | sed -e 's/ms1-/mt-/'`
  		;;
+ 	msys)
+ 		basic_machine=i686-pc
+ 		os=-msys
+ 		;;
  	mvs)
  		basic_machine=i370-ibm
  		os=-mvs
  		;;
+ 	nacl)
+ 		basic_machine=le32-unknown
+ 		os=-nacl
+ 		;;
  	ncr3000)
  		basic_machine=i486-ncr
  		os=-sysv4
***************
*** 993,999 ****
  		basic_machine=i586-unknown
  		os=-pw32
  		;;
! 	rdos)
  		basic_machine=i386-pc
  		os=-rdos
  		;;
--- 1031,1041 ----
  		basic_machine=i586-unknown
  		os=-pw32
  		;;
! 	rdos | rdos64)
! 		basic_machine=x86_64-pc
! 		os=-rdos
! 		;;
! 	rdos32)
  		basic_machine=i386-pc
  		os=-rdos
  		;;
***************
*** 1320,1348 ****
  	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
  	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\
  	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
! 	      | -sym* | -kopensolaris* \
  	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
  	      | -aos* | -aros* \
  	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
  	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
  	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
! 	      | -openbsd* | -solidbsd* \
  	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
  	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
  	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
  	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
  	      | -chorusos* | -chorusrdb* | -cegcc* \
! 	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
! 	      | -mingw32* | -linux-gnu* | -linux-android* \
! 	      | -linux-newlib* | -linux-uclibc* \
! 	      | -uxpv* | -beos* | -mpeix* | -udk* \
  	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
  	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
  	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
  	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
  	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
  	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
! 	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es*)
  	# Remember, each alternative MUST END IN *, to match a version number.
  		;;
  	-qnx*)
--- 1362,1390 ----
  	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
  	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\
  	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
! 	      | -sym* | -kopensolaris* | -plan9* \
  	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
  	      | -aos* | -aros* \
  	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
  	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
  	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
! 	      | -bitrig* | -openbsd* | -solidbsd* \
  	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
  	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
  	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
  	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
  	      | -chorusos* | -chorusrdb* | -cegcc* \
! 	      | -cygwin* | -msys* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
! 	      | -mingw32* | -mingw64* | -linux-gnu* | -linux-android* \
! 	      | -linux-newlib* | -linux-musl* | -linux-uclibc* \
! 	      | -uxpv* | -beos* | -mpeix* | -udk* | -moxiebox* \
  	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
  	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
  	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
  	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
  	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
  	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
! 	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es* | -tirtos*)
  	# Remember, each alternative MUST END IN *, to match a version number.
  		;;
  	-qnx*)
***************
*** 1466,1474 ****
  	-aros*)
  		os=-aros
  		;;
- 	-kaos*)
- 		os=-kaos
- 		;;
  	-zvmoe)
  		os=-zvmoe
  		;;
--- 1508,1513 ----
***************
*** 1517,1522 ****
--- 1556,1567 ----
  	c4x-* | tic4x-*)
  		os=-coff
  		;;
+ 	c8051-*)
+ 		os=-elf
+ 		;;
+ 	hexagon-*)
+ 		os=-elf
+ 		;;
  	tic54x-*)
  		os=-coff
  		;;
***************
*** 1544,1552 ****
  		;;
  	m68000-sun)
  		os=-sunos3
- 		# This also exists in the configure program, but was not the
- 		# default.
- 		# os=-sunos4
  		;;
  	m68*-cisco)
  		os=-aout
--- 1589,1594 ----
diff -cNr ../ntp-4.2.8p2-orig/sntp/libevent/evutil_rand.c ./sntp/libevent/evutil_rand.c
*** ../ntp-4.2.8p2-orig/sntp/libevent/evutil_rand.c	2014-12-19 20:56:52.000000000 +0900
--- ./sntp/libevent/evutil_rand.c	2015-06-22 02:48:25.117383176 +0900
***************
*** 119,125 ****
  #ifdef EVENT__ssize_t
  #define ssize_t EVENT__ssize_t
  #endif
! #define ARC4RANDOM_EXPORT static
  #define ARC4_LOCK_() EVLOCK_LOCK(arc4rand_lock, 0)
  #define ARC4_UNLOCK_() EVLOCK_UNLOCK(arc4rand_lock, 0)
  #ifndef EVENT__DISABLE_THREAD_SUPPORT
--- 119,125 ----
  #ifdef EVENT__ssize_t
  #define ssize_t EVENT__ssize_t
  #endif
! #define ARC4RANDOM_EXPORT
  #define ARC4_LOCK_() EVLOCK_LOCK(arc4rand_lock, 0)
  #define ARC4_UNLOCK_() EVLOCK_UNLOCK(arc4rand_lock, 0)
  #ifndef EVENT__DISABLE_THREAD_SUPPORT
